\begin{frame}{detecting connection close}
    \begin{itemize}
    \item other end stops sending
        \begin{itemize}
        \item called close or (less common) shutdown or went down
        \end{itemize}
    \item (clean close) recv()/recvfrom() returns empty buffer
    \item (unclean close) recv()/recvfrom() throw exception
        \begin{itemize}
        \item example: `Connection reset by peer'
        \item (C: return -1 + set errno)
        \end{itemize}
    \item send()/sendall()
        \begin{itemize}
        \item usually BrokenPipeError, possibly other error
        \item (C: SIGPIPE, unless ignored/MSG\_NOSIGNAL; then EPIPE)
        \end{itemize}
    \end{itemize}
\end{frame}
